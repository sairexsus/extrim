<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EXTRIM Miner</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: url('https://cdn.discordapp.com/attachments/1374833926157107230/1404916053280034876/photo_2025-08-12_22-54-11.jpg?ex=689ced89&is=689b9c09&hm=dbce8ca859b5b1fd093a02839aa670011908ba19a05a91a817267d7122bb7977&') no-repeat center center fixed;
    background-size: cover;
    display: flex;
    justify-content: center;
    padding: 20px;
    color: #eee;
    user-select: none;
    min-height: 100vh;
    background-color: rgba(0,0,0,0.6);
    background-blend-mode: multiply;
  }
  #container {
    display: flex;
    gap: 40px;
    align-items: flex-start;
  }
  #leftSide {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    margin-bottom: 20px;
    color: #ffd700;
    text-shadow: 0 0 10px #ffd700;
  }
  #buttonsWrapper {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
  }
  .channel-btn {
    padding: 10px 25px 10px 40px;
    cursor: pointer;
    background: rgba(255,255,255,0.2);
    border-radius: 10px;
    font-weight: bold;
    color: #eee;
    user-select: none;
    transition: background-color 0.3s, color 0.3s;
    position: relative;
    display: flex;
    align-items: center;
  }
  .channel-btn.active {
    background: gold;
    color: black;
  }
  .channel-btn.disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  .channel-btn img {
    position: absolute;
    left: 10px;
    width: 20px;
    height: 20px;
    object-fit: contain;
    top: 50%;
    transform: translateY(-50%);
  }
  #grid {
    display: grid;
    grid-template-columns: repeat(8, 100px);
    grid-gap: 10px;
  }
  .cell {
    background: rgba(255,255,255,0.1);
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 12px;
    cursor: pointer;
    font-weight: bold;
    font-size: 32px;
    color: #b0f2b6;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    transition: background-color 0.3s, transform 0.3s;
    width: 100px;
    height: 100px;
  }
  .cell:hover:not(.opened) {
    background-color: rgba(50,255,50,0.3);
    transform: scale(1.1);
  }
  .cell.opened {
    cursor: default;
    background-color: rgba(0,0,0,0.6);
    color: #fff;
    text-shadow: 0 0 6px #0f0;
  }
  .cell.bomb {
    background-color: #ff3333 !important;
    color: white !important;
    text-shadow: 0 0 10px #ff0000;
  }
  #rouletteBtn, #showAllBtn {
    padding: 12px 28px;
    font-size: 18px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
    font-weight: bold;
    margin: 0 10px;
  }
  #rouletteBtn {
    background: gold;
    color: black;
  }
  #rouletteBtn:disabled {
    background: #666;
    color: #ccc;
    cursor: not-allowed;
  }
  #showAllBtn {
    background: #444;
    color: #eee;
  }
  #showAllBtn:disabled {
    background: #222;
    cursor: not-allowed;
    color: #555;
  }
  /* –†—É–ª–µ—Ç–∫–∞ */
  #rouletteWrapper {
    position: relative;
    width: 200px;
    height: 200px;
    user-select: none;
  }
  #rouletteWheel {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    border: 6px solid gold;
    box-shadow: 0 0 20px gold;
    transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    position: relative;
    overflow: hidden;
  }
  /* –°–µ–∫—Ç–æ—Ä—ã —Ä—É–ª–µ—Ç–∫–∏ */
  .sector {
    position: absolute;
    width: 100px;
    height: 100px;
    top: 50%;
    left: 50%;
    transform-origin: 0% 0%;
    clip-path: polygon(100% 0, 0 100%, 0 0);
    font-weight: bold;
    color: black;
    font-size: 18px;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding-left: 10px;
    user-select: none;
  }
  .sector.green {
    background: #a6f5a6;
  }
  .sector.red {
    background: #f5a6a6;
  }
  #arrow {
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-bottom: 30px solid gold;
    filter: drop-shadow(0 0 3px #fff);
    z-index: 10;
  }
  #resultMessage {
    margin-top: 15px;
    font-size: 22px;
    font-weight: bold;
    text-align: center;
    min-height: 30px;
    color: gold;
    text-shadow: 0 0 5px #fff;
  }
</style>
</head>
<body>

<div id="container">
  <div id="leftSide">
    <h1>EXTRIM Miner</h1>

    <div id="buttonsWrapper">
      <div id="twitchBtn" class="channel-btn active">
        <img src="https://cdn.discordapp.com/attachments/1374833926157107230/1404918424618143866/twitch_logo_icon_189242.png?ex=689cefbe&is=689b9e3e&hm=21b7b891eeec9aae7f9d722dce7c5aacc398650975330bd7b35f89babffe5215&" alt="Twitch" />
        Twitch
      </div>
      <div id="youtubeBtn" class="channel-btn">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/42/YouTube_icon_%282013-2017%29.png" alt="YouTube" />
        YouTube
      </div>
    </div>

    <div id="grid"></div>

    <div>
      <button id="rouletteBtn" disabled>–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä—É–ª–µ—Ç–∫—É</button>
      <button id="showAllBtn" disabled>–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —è—á–µ–π–∫–∏</button>
    </div>

    <div id="resultMessage"></div>
  </div>

  <div id="rouletteWrapper">
    <div id="arrow"></div>
    <div id="rouletteWheel"></div>
  </div>
</div>

<script>
  const grid = document.getElementById('grid');
  const twitchBtn = document.getElementById('twitchBtn');
  const youtubeBtn = document.getElementById('youtubeBtn');
  const rouletteBtn = document.getElementById('rouletteBtn');
  const showAllBtn = document.getElementById('showAllBtn');
  const rouletteWheel = document.getElementById('rouletteWheel');
  const resultMessage = document.getElementById('resultMessage');

  const twitchRewards = [1000, 1500, 2000, 2500, 5000];
  const youtubeRewards = [1000, 1500, 2000, 2500, 5000, 10000];

  const twitchChances = [0.4, 0.3, 0.15, 0.1, 0.05];
  const youtubeChances = [0.4, 0.3, 0.15, 0.1, 0.05, 0.03];

  let rewards = twitchRewards;
  let chances = twitchChances;

  const cellsCount = 64;
  let cellsData = [];
  let selectedCellIndex = null;
  let gameOver = false;
  let rouletteSpinning = false;

  // –°–µ–∫—Ç–æ—Ä—ã —Ä—É–ª–µ—Ç–∫–∏: true = –∑–µ–ª—ë–Ω—ã–π (—Ö2), false = –∫—Ä–∞—Å–Ω—ã–π (—Å–≥–æ—Ä–∞–µ—Ç)
  const rouletteSectors = [
    {color: 'green', label: 'x2'},
    {color: 'red', label: '–°–≥–æ—Ä–µ–ª–æ'},
    {color: 'green', label: 'x2'},
    {color: 'red', label: '–°–≥–æ—Ä–µ–ª–æ'},
    {color: 'green', label: 'x2'},
    {color: 'red', label: '–°–≥–æ—Ä–µ–ª–æ'},
    {color: 'green', label: 'x2'},
    {color: 'red', label: '–°–≥–æ—Ä–µ–ª–æ'}
  ];

  // –°–æ–∑–¥–∞–µ–º —Ä—É–ª–µ—Ç–∫—É –≤–∏–∑—É–∞–ª—å–Ω–æ
  function createRoulette() {
    rouletteWheel.innerHTML = '';
    const sectorAngle = 360 / rouletteSectors.length;

    rouletteSectors.forEach((sector, i) => {
      const div = document.createElement('div');
      div.className = 'sector ' + sector.color;
      div.style.transform = `rotate(${i * sectorAngle}deg) skewY(-${90 - sectorAngle}deg)`;
      div.textContent = sector.label;
      rouletteWheel.appendChild(div);
    });
  }

  // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–µ —è—á–µ–µ–∫
  function createGrid() {
    grid.innerHTML = '';
    cellsData = [];
    selectedCellIndex = null;
    gameOver = false;
    rouletteSpinning = false;
    rouletteBtn.disabled = true;
    showAllBtn.disabled = true;
    resultMessage.textContent = '';

    twitchBtn.classList.remove('disabled');
    youtubeBtn.classList.remove('disabled');

    for(let i=0; i < cellsCount; i++) {
      const cell = document.createElement('div');
      cell.classList.add('cell');
      cell.dataset.index = i;
      cell.addEventListener('click', onCellClick);
      grid.appendChild(cell);
    }

    generateCellsData();
  }

  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —è—á–µ–µ–∫
  function generateCellsData() {
    cellsData = [];
    const guaranteedIndex = Math.floor(Math.random() * cellsCount);

    for(let i=0; i < cellsCount; i++) {
      if(i === guaranteedIndex) {
        cellsData.push({type: 'reward', value: rewards[rewards.length - 1]});
      } else {
        const bombChance = 0.2;
        if(Math.random() < bombChance) {
          cellsData.push({type: 'bomb'});
        } else {
          cellsData.push({type: 'reward', value: getRandomReward()});
        }
      }
    }
  }

  // –ü–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É –ø–æ —à–∞–Ω—Å–∞–º
  function getRandomReward() {
    let r = Math.random();
    let sum = 0;
    for(let i=0; i < chances.length; i++) {
      sum += chances[i];
      if(r <= sum) return rewards[i];
    }
    return rewards[0];
  }

  // –ö–ª–∏–∫ –ø–æ —è—á–µ–π–∫–µ
  function onCellClick(e) {
    if(gameOver || rouletteSpinning) return;
    if(selectedCellIndex !== null) return;

    const cell = e.currentTarget;
    const index = +cell.dataset.index;
    if(cell.classList.contains('opened')) return;

    cell.classList.add('opened');
    selectedCellIndex = index;
    showAllBtn.disabled = false;

    const data = cellsData[index];
    if(data.type === 'bomb') {
      cell.textContent = 'üí£';
      cell.classList.add('bomb');
      gameOver = true;
      rouletteBtn.disabled = true;
      twitchBtn.classList.add('disabled');
      youtubeBtn.classList.add('disabled');
      twitchBtn.classList.remove('active');
      youtubeBtn.classList.remove('active');
      resultMessage.textContent = '–í–∑–æ—Ä–≤–∞–ª–∞—Å—å –±–æ–º–±–∞! –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞.';
    } else {
      cell.textContent = data.value;
      rouletteBtn.disabled = false;
      resultMessage.textContent = '';
    }
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤
  twitchBtn.addEventListener('click', () => {
    if(gameOver || rouletteSpinning) return;
    if(selectedCellIndex !== null) return;
    rewards = twitchRewards;
    chances = twitchChances;
    twitchBtn.classList.add('active');
    youtubeBtn.classList.remove('active');
    createGrid();
  });

  youtubeBtn.addEventListener('click', () => {
    if(gameOver || rouletteSpinning) return;
    if(selectedCellIndex !== null) return;
    rewards = youtubeRewards;
    chances = youtubeChances;
    youtubeBtn.classList.add('active');
    twitchBtn.classList.remove('active');
    createGrid();
  });

  // –ó–∞–ø—É—Å–∫ —Ä—É–ª–µ—Ç–∫–∏
  rouletteBtn.addEventListener('click', () => {
    if(rouletteSpinning || selectedCellIndex === null) return;

    rouletteSpinning = true;
    rouletteBtn.disabled = true;
    twitchBtn.classList.add('disabled');
    youtubeBtn.classList.add('disabled');

    resultMessage.textContent = '–†—É–ª–µ—Ç–∫–∞ –∫—Ä—É—Ç–∏—Ç—Å—è...';

    // –°–ª—É—á–∞–π–Ω—ã–π —Å–µ–∫—Ç–æ—Ä —Ä—É–ª–µ—Ç–∫–∏ (0-7)
    const winningIndex = Math.floor(Math.random() * rouletteSectors.length);

    // –ü–æ–≤–æ—Ä–æ—Ç —Ä—É–ª–µ—Ç–∫–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã—Ö –æ–±–æ—Ä–æ—Ç–æ–≤ + —Å–µ–∫—Ç–æ—Ä
    const spins = 6;
    const sectorAngle = 360 / rouletteSectors.length;
    const stopAngle = 360 * spins + (360 - winningIndex * sectorAngle) - sectorAngle / 2;

    rouletteWheel.style.transition = 'transform 5s cubic-bezier(0.33, 1, 0.68, 1)';
    rouletteWheel.style.transform = `rotate(${stopAngle}deg)`;

    setTimeout(() => {
      rouletteSpinning = false;
      const sector = rouletteSectors[winningIndex];

      if(sector.color === 'green') {
        // –£–º–Ω–æ–∂–∞–µ–º —Å—É–º–º—É –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —è—á–µ–π–∫–µ –Ω–∞ 2
        const cell = grid.children[selectedCellIndex];
        let currentValue = parseInt(cell.textContent) || 0;
        let newValue = currentValue * 2;
        cell.textContent = newValue;
        resultMessage.innerHTML = `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –ù–∞–≥—Ä–∞–¥–∞ —É–¥–≤–æ–µ–Ω–∞: <span style="color:#0f0;">${newValue}</span>`;
      } else {
        // –°–≥–æ—Ä–∞–µ—Ç —Å—É–º–º–∞ ‚Äî —è—á–µ–π–∫–∞ –∫—Ä–∞—Å–Ω–µ–µ—Ç, –∏ –∏–≥—Ä–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è
        const cell = grid.children[selectedCellIndex];
        cell.textContent = 'üíî';
        cell.classList.add('bomb');
        resultMessage.innerHTML = `<span style="color:#f00;">–°—É–º–º–∞ —Å–≥–æ—Ä–µ–ª–∞! üò¢</span>`;
        gameOver = true;
      }
    }, 5200);
  });

  showAllBtn.addEventListener('click', () => {
    for(let i=0; i < cellsCount; i++) {
      const cell = grid.children[i];
      if(cell.classList.contains('opened')) continue;
      const data = cellsData[i];
      cell.classList.add('opened');
      if(data.type === 'bomb') {
        cell.textContent = 'üí£';
        cell.classList.add('bomb');
      } else {
        cell.textContent = data.value;
      }
    }
    showAllBtn.disabled = true;
  });

  createRoulette();
  createGrid();
</script>

</body>
</html>
