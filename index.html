<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EXTRIM Miner</title>
<style>
  /* –§–æ–Ω —Å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ–º –∏ –ª–µ–≥–∫–∏–º —Ä–∞–∑–º—ã—Ç–∏–µ–º */
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    background: url('extrim.png') no-repeat center center fixed;
    background-size: cover;
    position: relative;
    color: #fff;
  }
  /* –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ç—ë–º–Ω—ã–π —Å–ª–æ–π –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    z-index: 0;
  }

  h1 {
    margin: 20px 0 10px 0;
    font-weight: 700;
    font-size: 2.5rem;
    position: relative;
    z-index: 1;
    text-shadow: 0 0 10px rgba(0,0,0,0.7);
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(8, 70px);
    grid-template-rows: repeat(8, 70px);
    gap: 8px;
    background: rgba(0, 0, 0, 0.45);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 20px rgba(0,0,0,0.7);
    position: relative;
    z-index: 1;
  }

  .cell {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    border: 2px solid #222;
    box-shadow: 0 3px 5px rgba(0,0,0,0.2);
    font-size: 20px;
    font-weight: 700;
    color: #111;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    user-select: none;
    transition: transform 0.2s, background-color 0.3s;
  }

  .cell:hover {
    background: #fff;
    transform: scale(1.08);
  }

  .cell[data-clicked="true"] {
    cursor: default;
    transform: none;
    background: #eee;
    color: #333;
  }

  .bomb {
    animation: bombFlash 0.6s infinite alternate;
    background: #c62828 !important;
    color: white !important;
    font-size: 26px;
    box-shadow: 0 0 15px #ff3d3d;
  }
  @keyframes bombFlash {
    0% { background: #c62828; }
    100% { background: #b71c1c; }
  }

  .reward {
    color: #2e7d32;
    text-shadow: 0 0 6px #4caf50;
  }

  #upgradeBtn {
    margin-top: 25px;
    padding: 14px 40px;
    font-size: 20px;
    font-weight: 700;
    border: none;
    border-radius: 40px;
    background: linear-gradient(45deg, #ffd700, #ffab00);
    color: #000;
    cursor: pointer;
    box-shadow: 0 0 25px #ffea00;
    user-select: none;
    transition: background-color 0.3s, transform 0.2s;
    position: relative;
    z-index: 1;
  }
  #upgradeBtn:hover {
    background: linear-gradient(45deg, #ffea00, #ffc107);
    transform: scale(1.05);
  }
  #upgradeBtn:active {
    transform: scale(0.95);
  }
</style>
</head>
<body>

<h1>EXTRIM Miner</h1>

<div class="grid" id="grid"></div>
<button id="upgradeBtn" style="display:none;">–£–ª—É—á—à–∏—Ç—å –Ω–∞–≥—Ä–∞–¥—É</button>

<script>
  const grid = document.getElementById("grid");
  const upgradeBtn = document.getElementById("upgradeBtn");
  let currentRewardCell = null;

  const rewards = [
    {value: 1000, weight: 40},
    {value: 1500, weight: 30},
    {value: 2000, weight: 15},
    {value: 2500, weight: 8},
    {value: 5000, weight: 5},
    {value: 10000, weight: 2},
  ];

  function weightedRandom(items) {
    let total = items.reduce((sum, item) => sum + item.weight, 0);
    let rand = Math.random() * total;
    for (let item of items) {
      if (rand < item.weight) return item.value;
      rand -= item.weight;
    }
  }

  function createGrid() {
    grid.innerHTML = '';
    for (let i = 0; i < 64; i++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");
      cell.dataset.clicked = "false";
      cell.addEventListener("click", () => handleClick(cell));
      grid.appendChild(cell);
    }
  }

  function handleClick(cell) {
    if (cell.dataset.clicked === "true") return;

    cell.dataset.clicked = "true";

    if (Math.random() < 0.2) {
      cell.textContent = "üí£";
      cell.classList.add("bomb");
      upgradeBtn.style.display = "none";
      currentRewardCell = null;
      return;
    }

    let finalValue = weightedRandom(rewards);
    animateNumber(cell, finalValue);
    cell.classList.add("reward");
    currentRewardCell = cell;
    upgradeBtn.style.display = "block";
  }

  function animateNumber(cell, target) {
    let value = 0;
    let step = Math.ceil(target / 20);
    let interval = setInterval(() => {
      value += step;
      if (value >= target) {
        value = target;
        clearInterval(interval);
      }
      cell.textContent = value;
    }, 50);
  }

  upgradeBtn.addEventListener("click", () => {
    if (currentRewardCell) {
      let currentValue = parseInt(currentRewardCell.textContent);
      let newValue = currentValue + 500;
      animateNumber(currentRewardCell, newValue);
    }
  });

  createGrid();
</script>

</body>
</html>
